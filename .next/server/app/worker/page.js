(()=>{var e={};e.id=706,e.ids=[706],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1811:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(2006),t(4752),t(5866);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),d=t(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let c=["",{children:["worker",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2006)),"/Users/jordy/dev/jobHunt/app/worker/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4752)),"/Users/jordy/dev/jobHunt/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/jordy/dev/jobHunt/app/worker/page.tsx"],x="/worker/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/worker/page",pathname:"/worker",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9884:(e,s,t)=>{Promise.resolve().then(t.bind(t,8143))},590:(e,s,t)=>{Promise.resolve().then(t.bind(t,7143))},7988:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8143:(e,s,t)=>{"use strict";t.d(s,{S:()=>o,TRPCProvider:()=>x});var r=t(326),a=t(7012),i=t(6293),n=t(9355),d=t(2325),l=t(7577),c=t(2282);let o=(0,d.ec)();function x({children:e}){let[s]=(0,l.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:5e3,refetchOnWindowFocus:!1}}})),[t]=(0,l.useState)(()=>o.createClient({transformer:c.ZP,links:[(0,n.gb)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,n.N8)({url:`${process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT??3e3}`}/api/trpc`})]}));return r.jsx(o.Provider,{client:t,queryClient:s,children:r.jsx(i.aH,{client:s,children:e})})}},7143:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(326),a=t(8143),i=t(6697),n=t(6307);let d=(0,t(2881).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var l=t(1405),c=t(7506),o=t(8998),x=t(9669),m=t(3745);function u(){let{data:e,isLoading:s}=a.S.worker.stats.useQuery(void 0,{refetchInterval:5e3}),{data:t,isLoading:u}=a.S.worker.health.useQuery(void 0,{refetchInterval:5e3}),{data:h}=a.S.worker.recentRuns.useQuery({limit:10,status:"pending"},{refetchInterval:5e3}),{data:j}=a.S.worker.recentRuns.useQuery({limit:10,status:"running"},{refetchInterval:5e3}),{data:p}=a.S.worker.recentRuns.useQuery({limit:15},{refetchInterval:5e3});return(0,r.jsxs)("main",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(i.Z,{className:"h-8 w-8"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Worker Monitor"}),r.jsx(l.Z,{className:"h-5 w-5 text-muted-foreground animate-spin ml-auto"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Real-time worker status and pipeline execution monitoring"})]})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Worker Health"}),r.jsx("div",{className:"rounded-lg border p-6",children:u?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(c.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-3 rounded-full ${(()=>{if(!t)return"bg-gray-500";switch(t.status){case"healthy":return"bg-green-500";case"warning":return"bg-yellow-500";default:return"bg-gray-500"}})()} text-white`,children:(()=>{if(!t)return r.jsx(i.Z,{className:"h-5 w-5"});switch(t.status){case"healthy":return r.jsx(n.Z,{className:"h-5 w-5"});case"warning":return r.jsx(d,{className:"h-5 w-5"});default:return r.jsx(i.Z,{className:"h-5 w-5"})}})()}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("h3",{className:"font-semibold text-lg",children:[t?.status==="healthy"&&"Worker is Healthy",t?.status==="warning"&&"Worker Warning"]})}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t?.message}),t?.lastActivity&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Last activity: ",(0,m.Q)(new Date(t.lastActivity),{addSuffix:!0})]})]}),t?.stuckRuns>0&&(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t?.stuckRuns}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Stuck Runs"})]})]})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Metrics"}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"rounded-lg border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(o.Z,{className:"h-5 w-5 text-yellow-600"}),r.jsx("span",{className:"text-2xl font-bold",children:s?"-":e?.pending||0})]}),r.jsx("div",{className:"text-sm font-medium",children:"Pending"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Waiting to run"})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(l.Z,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-2xl font-bold",children:s?"-":e?.running||0})]}),r.jsx("div",{className:"text-sm font-medium",children:"Running"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Currently executing"})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(i.Z,{className:"h-5 w-5 text-purple-600"}),r.jsx("span",{className:"text-2xl font-bold",children:s?"-":e?.runsLastHour||0})]}),r.jsx("div",{className:"text-sm font-medium",children:"Last Hour"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Runs executed"})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(x.Z,{className:"h-5 w-5 text-red-600"}),r.jsx("span",{className:"text-2xl font-bold",children:s?"-":`${e?.errorRate||0}%`})]}),r.jsx("div",{className:"text-sm font-medium",children:"Error Rate"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[(0,r.jsxs)("div",{className:"rounded-lg border p-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Duration"}),r.jsx("div",{className:"text-xl font-semibold mt-1",children:s?"-":`${((e?.avgDurationMs||0)/1e3).toFixed(2)}s`})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"24h Success"}),r.jsx("div",{className:"text-xl font-semibold mt-1 text-green-600",children:s?"-":e?.successCount||0})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"24h Failed"}),r.jsx("div",{className:"text-xl font-semibold mt-1 text-red-600",children:s?"-":e?.failedCount||0})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2 mb-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pending Queue"}),r.jsx("div",{className:"rounded-lg border",children:h&&0!==h.length?r.jsx("div",{className:"divide-y",children:h.map(e=>r.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:e.pipeline.name}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.steps.length," steps"]})]}),r.jsx("div",{className:"text-xs text-muted-foreground text-right",children:(0,m.Q)(new Date(e.startedAt),{addSuffix:!0})})]})},e.id))}):(0,r.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[r.jsx(o.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No pending runs"})]})})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Currently Running"}),r.jsx("div",{className:"rounded-lg border",children:j&&0!==j.length?r.jsx("div",{className:"divide-y",children:j.map(e=>r.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:e.pipeline.name}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.steps.filter(e=>"completed"===e.status).length," / ",e.steps.length," steps"]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all",style:{width:`${e.steps.filter(e=>"completed"===e.status).length/e.steps.length*100}%`}})})]}),r.jsx("div",{className:"text-xs text-muted-foreground text-right ml-4",children:(0,m.Q)(new Date(e.startedAt),{addSuffix:!0})})]})},e.id))}):(0,r.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[r.jsx(l.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No running runs"})]})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),r.jsx("div",{className:"rounded-lg border",children:p&&0!==p.length?r.jsx("div",{className:"divide-y",children:p.map(e=>r.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,r.jsxs)("div",{children:["success"===e.status&&r.jsx(n.Z,{className:"h-5 w-5 text-green-600"}),"failed"===e.status&&r.jsx(x.Z,{className:"h-5 w-5 text-red-600"}),"running"===e.status&&r.jsx(l.Z,{className:"h-5 w-5 text-blue-600 animate-spin"}),"pending"===e.status&&r.jsx(o.Z,{className:"h-5 w-5 text-yellow-600"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:e.pipeline.name}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.steps.length," steps",e.finishedAt&&e.startedAt&&(0,r.jsxs)("span",{className:"ml-2",children:["â€¢ ",((new Date(e.finishedAt).getTime()-new Date(e.startedAt).getTime())/1e3).toFixed(2),"s"]})]})]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:(0,m.Q)(new Date(e.startedAt),{addSuffix:!0})})]})},e.id))}):(0,r.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[r.jsx(i.Z,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No recent activity"})]})})]})]})]})}},6697:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},1405:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4752:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>l});var r=t(9510),a=t(5384),i=t.n(a);t(7272);var n=t(8570);(0,n.createProxy)(String.raw`/Users/jordy/dev/jobHunt/app/providers.tsx#trpc`);let d=(0,n.createProxy)(String.raw`/Users/jordy/dev/jobHunt/app/providers.tsx#TRPCProvider`),l={title:"Orbit Pipeline",description:"Resilient job execution pipeline with retry logic"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(d,{children:e})})})}},2006:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/jordy/dev/jobHunt/app/worker/page.tsx#default`)},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,855,394],()=>t(1811));module.exports=r})();