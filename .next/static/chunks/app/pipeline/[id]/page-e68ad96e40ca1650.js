(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[986],{9864:function(e,s,r){Promise.resolve().then(r.bind(r,7616))},7616:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(7437),n=r(9294),a=r(2934),i=r(9388),l=r(1723),d=r(1817),c=r(2660),o=r(3276),u=r(9322),x=r(7648),f=r(9376),m=r(2869),h=r(5974),g=r(6070),p=r(1797),j=r(8940);function b(){let e=(0,f.useParams)().id,{data:s,isLoading:r,error:b}=n.S.pipeline.get.useQuery({id:e}),{data:v,isLoading:N,error:y}=n.S.run.getByPipeline.useQuery({pipelineId:e,limit:50}),w=n.S.useUtils(),Z=n.S.pipeline.trigger.useMutation({onSuccess:()=>{w.pipeline.get.invalidate({id:e}),w.run.getByPipeline.invalidate({pipelineId:e,limit:50})}}),S=e=>{switch(e){case"success":return(0,t.jsx)(a.Z,{className:"h-4 w-4 text-green-600"});case"failed":return(0,t.jsx)(i.Z,{className:"h-4 w-4 text-red-600"});case"running":return(0,t.jsx)(l.Z,{className:"h-4 w-4 text-yellow-600 animate-spin"});default:return(0,t.jsx)(l.Z,{className:"h-4 w-4 text-gray-400"})}},C=e=>{switch(e){case"success":return(0,t.jsxs)(h.C,{variant:"success",className:"gap-1",children:[S(e)," Success"]});case"failed":return(0,t.jsxs)(h.C,{variant:"error",className:"gap-1",children:[S(e)," Failed"]});case"running":return(0,t.jsxs)(h.C,{variant:"warning",className:"gap-1",children:[S(e)," Running"]});default:return(0,t.jsxs)(h.C,{variant:"outline",className:"gap-1",children:[S(e)," Pending"]})}},R=(e,s)=>{if(!e)return"Not started";let r=new Date(e),t=s?new Date(s):new Date,n=(0,p.y)({start:r,end:t}),a=[];return n.hours&&a.push("".concat(n.hours,"h")),n.minutes&&a.push("".concat(n.minutes,"m")),n.seconds&&a.push("".concat(n.seconds,"s")),a.length>0?a.join(" "):"< 1s"};if(r||N)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(b||y||!s)return(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-destructive mb-2",children:"Error loading pipeline"}),(0,t.jsx)("p",{className:"text-sm text-destructive/80",children:(null==b?void 0:b.message)||(null==y?void 0:y.message)||"Pipeline not found"}),(0,t.jsx)(x.default,{href:"/",children:(0,t.jsxs)(m.z,{variant:"outline",className:"mt-4 gap-2",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"Back to Dashboard"]})})]})});let k=(()=>{if(!(null==v?void 0:v.runs))return{total:0,success:0,failed:0,running:0,successRate:0};let e=v.runs.length,s=v.runs.filter(e=>"success"===e.status).length;return{total:e,success:s,failed:v.runs.filter(e=>"failed"===e.status).length,running:v.runs.filter(e=>"running"===e.status).length,successRate:e>0?s/e*100:0}})(),P=(null==v?void 0:v.runs)||[];return(0,t.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)(x.default,{href:"/",children:(0,t.jsxs)(m.z,{variant:"ghost",className:"gap-2 mb-4",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"Back to Dashboard"]})}),(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:s.name}),(0,t.jsx)("p",{className:"text-muted-foreground",children:s.description||"No description provided"})]}),(0,t.jsxs)(m.z,{className:"gap-2",onClick:()=>Z.mutate({id:e}),disabled:Z.isPending,children:[Z.isPending?(0,t.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(o.Z,{className:"h-4 w-4"}),Z.isPending?"Starting...":"Run Now"]})]})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{className:"pb-2",children:(0,t.jsx)(g.SZ,{children:"Total Runs"})}),(0,t.jsx)(g.aY,{children:(0,t.jsx)("p",{className:"text-3xl font-bold",children:k.total})})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{className:"pb-2",children:(0,t.jsx)(g.SZ,{children:"Success Rate"})}),(0,t.jsx)(g.aY,{children:(0,t.jsxs)("p",{className:"text-3xl font-bold ".concat(k.successRate>=80?"text-green-600":k.successRate>=50?"text-yellow-600":"text-red-600"),children:[k.successRate.toFixed(0),"%"]})})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{className:"pb-2",children:(0,t.jsx)(g.SZ,{children:"Successful"})}),(0,t.jsx)(g.aY,{children:(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600",children:k.success})})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{className:"pb-2",children:(0,t.jsx)(g.SZ,{children:"Failed"})}),(0,t.jsx)(g.aY,{children:(0,t.jsx)("p",{className:"text-3xl font-bold text-red-600",children:k.failed})})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsxs)(g.Ol,{children:[(0,t.jsx)(g.ll,{children:"Run History"}),(0,t.jsxs)(g.SZ,{children:[P.length," run",1!==P.length?"s":""," found"]})]}),(0,t.jsx)(g.aY,{children:0===P.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No runs yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This pipeline hasn't been executed yet. Start your first run!"}),(0,t.jsxs)(m.z,{className:"gap-2",onClick:()=>Z.mutate({id:e}),disabled:Z.isPending,children:[Z.isPending?(0,t.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(o.Z,{className:"h-4 w-4"}),Z.isPending?"Starting...":"Run Now"]})]}):(0,t.jsx)("div",{className:"space-y-4",children:P.map(s=>{let r=R(s.startedAt,s.finishedAt),n=s.steps.filter(e=>"failed"===e.status).length;return(0,t.jsx)(x.default,{href:"/pipeline/".concat(e,"/run/").concat(s.id),children:(0,t.jsx)("div",{className:"p-4 rounded-lg border hover:border-primary transition-colors cursor-pointer",children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[C(s.status),(0,t.jsx)("code",{className:"text-sm text-muted-foreground",children:s.id.slice(0,8)})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Started:"})," ",(0,j.Q)(new Date(s.startedAt),{addSuffix:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Duration:"})," ",r]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Steps:"})," ",s.steps.length,n>0&&(0,t.jsxs)("span",{className:"text-red-600 ml-1",children:["(",n," failed)"]})]}),s.triggeredBy&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Triggered by:"})," ",s.triggeredBy]})]})]})})})},s.id)})})})]})]})]})}},9294:function(e,s,r){"use strict";r.d(s,{S:function(){return o},TRPCProvider:function(){return u}});var t=r(7437),n=r(3160),a=r(9693),i=r(2899),l=r(8594),d=r(2265),c=r(8080);r(257);let o=(0,l.ec)();function u(e){let{children:s}=e,[r]=(0,d.useState)(()=>new n.S({defaultOptions:{queries:{staleTime:5e3,refetchOnWindowFocus:!1}}})),[l]=(0,d.useState)(()=>o.createClient({transformer:c.ZP,links:[(0,i.gb)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,i.N8)({url:"".concat("","/api/trpc")})]}));return(0,t.jsx)(o.Provider,{client:l,queryClient:r,children:(0,t.jsx)(a.aH,{client:r,children:s})})}},5974:function(e,s,r){"use strict";r.d(s,{C:function(){return l}});var t=r(7437);r(2265);var n=r(535),a=r(4508);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",error:"border-transparent bg-red-500 text-white hover:bg-red-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)(i({variant:r}),s),...n})}},2869:function(e,s,r){"use strict";r.d(s,{z:function(){return d}});var t=r(7437),n=r(2265),a=r(535),i=r(4508);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,s)=>{let{className:r,variant:n,size:a,...d}=e;return(0,t.jsx)("button",{className:(0,i.cn)(l({variant:n,size:a,className:r})),ref:s,...d})});d.displayName="Button"},6070:function(e,s,r){"use strict";r.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var t=r(7437),n=r(2265),a=r(4508);let i=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let o=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent";let u=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},4508:function(e,s,r){"use strict";r.d(s,{cn:function(){return a}});var t=r(1994),n=r(3335);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,n.m6)((0,t.W)(s))}},3276:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])}},function(e){e.O(0,[632,446,157,988,971,117,744],function(){return e(e.s=9864)}),_N_E=e.O()}]);